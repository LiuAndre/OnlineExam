// Document Ready
$(function(){ 
    $("#dialogTambahMatkul , #dialogTambahPengajar,#dialogTambahPengambil").hide();

    $("#btnTambahMataKuliah").click(function(){
        $("#dialogTambahMatkul").slideDown();
        $(document).scrollTop( $("#dialogTambahMatkul").offset().top);  
    });

    $("#btnCancelTambahMatkul").click(function(){
        $("#dialogTambahMatkul").slideUp();
        $(document).scrollTop(0);  
    });

    $(".datatable").DataTable({
        "aLengthMenu": [[5,10, 25, 50, 100], [5,10, 25, 50, 100]],
        "iDisplayLength": 5
    });

    $("#btnTambahPengajar").click(function(){
        $("#dialogTambahPengajar").slideDown();
        $(document).scrollTop($("#dialogTambahPengajar").offset().top);  
    });

    $("#btnCancelTambahPengajar").click(function(){
        $("#dialogTambahPengajar").slideUp();
        $(document).scrollTop($("#formLihatPengajar").offset().top);  
    });

    $("#btnTutupPengajar,#btnCancelUpdateMatkul").click(function(){
        window.location = "masterMatakuliah.php";
    });

    $("#btnTambahMengambil").click(function(){
        $("#dialogTambahPengambil").slideDown();
        $(document).scrollTop($("#dialogTambahPengambil").offset().top);  
    });

    $("#btnCancelTambahPengambil").click(function(){
        $("#dialogTambahPengambil").slideUp();
        $(document).scrollTop($("#formLihatPengajar").offset().top);  
    });

    function findUpTag(el, tag) {
        while (el.parentNode) {
            el = el.parentNode;
            if (el.tagName === tag)
                return el;
        }
        return null;
    }

    $("button[data-target='#dialogDeleteMatkul']").click(function(){
        var textNamaMatul = $($(findUpTag(this,"TR")).find("td:nth-child(2)")).text();
        var kodeMatkul = $(this).attr("value");
        var modalBody = $("#dialogDeleteMatkul").find(".modal-body");
        $(modalBody).text(" ");
        $(modalBody).append("<p>Apakah anda setuju mau menghapus mata kuliah " + textNamaMatul + "?</p>");
        $(modalBody).append("<input type='hidden' name='txtIdDeleteMatkul' value='"+ kodeMatkul + "'>");
    });

    $("#dialogTambahPengambil").attr("action",window.location);
});